# Copyright 2016 ITEA 12004 SEAS Project.
# 
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# 
#      http://www.apache.org/licenses/LICENSE-2.0
# 
# Unless required by applicable law or agreed to in writing,
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> . #Resource data framework
@prefix owl: <http://www.w3.org/2002/07/owl#> .     #Owl ontology language
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .   #RDF schema 
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .  #XML standard datatypes
@prefix dc: <http://purl.org/dc/terms/> .  #Dublin Core Metadata Initiative terms
@prefix vann: <http://purl.org/vocab/vann/> .  #A vocabulary for annotating vocabulary descriptions
@prefix voaf: <http://purl.org/vocommons/voaf#> . #A vocabulary of a friend, for describing relations between linked vocabularies
@prefix vs: <http://www.w3.org/2003/06/sw-vocab-status/ns#> . #Semantic web vocabulary status ontology
@prefix foaf: <http://xmlns.com/foaf/0.1/>.
@prefix ssn: <https://www.w3.org/ns/ssn/>.
@prefix cc: <http://creativecommons.org/ns#>.
@prefix dul: <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#>. # The DOLCE+DnS Ultralite ontology.
@prefix liner: <https://w3id.org/liner/>.
@prefix skos: <http://www.w3.org/2004/02/skos/core#>.
@prefix qb: <http://purl.org/linked-data/cube#>.
@prefix sd: <http://www.w3.org/ns/sparql-service-description#>.
@prefix rdfg: <http://www.w3.org/2004/03/trix/rdfg-1/>.

@prefix seas: <https://w3id.org/seas/>.
@base <https://w3id.org/seas/>.

seas:ProcessOntology a owl:Ontology , voaf:Vocabulary ;
  dc:title "SEAS-Process ontology."@en ;
  dc:description """This ontology generalizes the core of the SSN ontology (https://www.w3.org/ns/ssn/)."""@en ;
  dc:issued "2016-07-01"^^xsd:date ;
  dc:modified "2016-07-22"^^xsd:date ;
  dc:author <http://www.maxime-lefrancois.info/me#> ;
  cc:license <http://creativecommons.org/licenses/by/4.0/> ;
  vann:preferredNamespacePrefix "seas" ;
  vann:preferredNamespaceUri <https://w3id.org/seas/> ;  
  owl:versionIRI <https://w3id.org/seas/ProcessOntology/1.0> ;
  owl:versionInfo "v1.0" ;
#  owl:imports seas:GraphOntology , seas:FeatureOfInterestOntology ;
  liner:entailmentRegime seas:ProcessOntologyEntailmentRegime . 


# processes and graph descriptions

seas:Process a owl:Class ;
  rdfs:label "Process"@en ;
  rdfs:comment """The description of a process. A process generalizes the concept of ssn:Sensing in the SSN ontology, and of san:Acting in the SAN ontology. Examples of processes include sensing, acting, planning, or forecasting.

   In the first version of the SSN ontology, ssn:Process was a subclass of dul:Method. A dul:Method is a Description that defines or uses concepts in order to guide carrying out actions aimed at a solution with respect to a problem. It is different from a Plan, because plans could be carried out in order to follow a method, but a method can be followed by executing alternative plans.

   Here, a process links to the description of the RDF graph it expects as input, and to the description of the graph it outputs. For example, the following RDF graph describes a process where:
   - the topic of the input graph is a car;
   - the topic of the output is the speed of that same car, which is forecasted.

    <process> a seas:Process ;
      seas:hasInput [ a seas:Graph ;
        foaf:topic _:car ] ;
      seas:hasOutput [ a seas:Graph ;
        foaf:topic _:estimation ] .
    _:car <speed> [ seas:estimation _:estimation ] .
    _:estimation seas:interpretedAs sdmx-code:obsStatus-F . # (see also sdmx-codeS mentioned in the W3C RDF Data Cube Vocabulary)"""@en ;
  vs:term_status "stable" ;
  rdfs:isDefinedBy seas:ProcessOntology .

# process executor

seas:ProcessExecutor a owl:Class ;
  rdfs:label "Process Executor" ;
  rdfs:comment """A Process Executor can execute (implement) processes. A Process Executor may be a physical device, a computational method, a web service, a laboratory setup with a person following a method, or any other thing that can follow a Process. This concept generalizes ssn:Sensor, which in the latest version of the SSN ontology is a subclass of dul:Object. A dul:Object is any physical, social, or mental object, or a substance.
  Prototypical process executors are Sensor, Actuator, Estimator.

  Here, a process executor may also link to the description of the RDF graph it expects as input, and to the description of the graph it outputs. These descriptions factorize and extend those of all the processes it implements. For example, the following RDF graph describes a process executor where:
   - the topic of the input graph is a specific car;
   - the topic of the output is the speed of that same car.

    <sensor> a seas:ProcessExecutor ;
      seas:hasInput [ a seas:Graph ;
        foaf:topic <car/1> ] ;
      seas:hasOutput [ a seas:Graph ;
        foaf:topic _:estimation ] .
    <car/1> <speed> [ seas:estimation _:estimation ] .

  Links to ProcessExecution describe the Executions made.

  Links to Processes define how the executor can make Executions (it may implement several Processes). A Process Executor implements each of the methods used by the Executions it made. 

  Other metadata may detail geolocation, vendor, operator, consumed power, etc."""@en ;
  rdfs:subClassOf seas:FeatureOfInterest ;
  vs:term_status "stable" ;
  rdfs:isDefinedBy seas:ProcessOntology .

seas:implements a owl:ObjectProperty ;
  rdfs:label "implements" ;
  rdfs:comment """A relation between an Process Executor and a method it implements. This concept generalizes ssn:implements, which in the first version of the SSN ontology is a subproperty of dul:isDescribedBy. dul:isDescribedBy is the relation between an Entity and a Description. A Description gives a unity to a Collection of parts (the components), or constituents, by assigning a Role to each of them in the context of a whole Object (the system)."""@en ;
  rdfs:domain seas:ProcessExecutor ;
  rdfs:range seas:Process ;
  owl:propertyChainAxiom ( seas:executed seas:methodUsed ) ;
  owl:propertyChainAxiom ( seas:processExecutionContainer seas:forProcess ) ;
  vs:term_status "stable" ;
  rdfs:isDefinedBy seas:ProcessOntology .

# process execution container

seas:ProcessExecutionContainer a owl:ObjectProperty ;
  rdfs:label "Process Execution Container" ;
  rdfs:comment """The class of Process Executor Containers. They are Web container of Process Execution ressources, where one may operate HTTP POST requests to execute a given process."""@en ;
  vs:term_status "stable" ;
  rdfs:isDefinedBy seas:ProcessOntology .

seas:processExecutionContainer a owl:ObjectProperty ;
  rdfs:label "process execution container" ;
  rdfs:comment """Links a Process Executor to a Web container of Process Execution ressources, where one may operate HTTP POST requests to execute the process."""@en ;
  rdfs:domain seas:ProcessExecutor ;
  rdfs:range seas:ProcessExecutionContainer ;
  vs:term_status "stable" ;
  rdfs:isDefinedBy seas:ProcessOntology .

seas:forProcess a owl:ObjectProperty ;
  rdfs:label "for process" ;
  rdfs:comment """Links a Process Execution Container to the Process that is executed when one operate a HTTP POST request to it."""@en ;
  rdfs:domain seas:ProcessExecutionContainer ;
  rdfs:range seas:Process ;
  vs:term_status "stable" ;
  rdfs:isDefinedBy seas:ProcessOntology .

seas:executor a owl:ObjectProperty ;
  rdfs:label "executor" ;
  rdfs:comment "Relationship between a process execution container and the process executor that controls it."@en ;
  vs:term_status "stable" ;
  rdfs:domain seas:ProcessExecutionContainer ;
  rdfs:range seas:ProcessExecutor ;
  rdfs:isDefinedBy seas:ProcessOntology .
# process execution

seas:ProcessExecution a owl:Class ;
  rdfs:label "Process Execution" ;
  rdfs:comment """A process execution is a Situation where a process has been executed by a Process Executor. This concept generalizes ssn:Observation, which was limited to a stimulus from exactly one property and outputted a value for exactly one property, the first being a proxy for the second.

  In the first version of the SSN ontology, ssn:Observation is defined as a subClassOf dul:Situation. A dul:Situation is a view, consistent with ('satisfying') a Description, on a set of entities.  It can also be seen as a 'relational context' created by an observer on the basis of a 'frame' (i.e. a Description).  For example, a PlanExecution is a context including some actions executed by agents according to certain parameters and expected tasks to be achieved from a Plan. Also, in the first version of SSN, instances of ssn:Observation are linked through dul:includesEvent only to instances of ssn:Stimulus. dul:includesEvent is a relation between situations and events, e.g. 'this morning I've prepared my coffee and had my fingers burnt' (i.e.: the preparation of my coffee this morning included a burning of my fingers). Property ssn:fromStimulus was used instead of dul:includeEvent in the latest SSN ontology, and SEAS defines seas:stimulus.

  Links to ProcessExecutor and Process describe what made the Execution and how. 

  Here, a process execution may also link to the names of RDF graphs that represent the input, and the output. For example, the following RDF graph describes a process execution:

  <exec> a seas:ProcessExecution ;
    seas:hasInput <exec/input> ;
    seas:hasOutput <exec/output> .

  Then the graph with name <exec/input> contains: 

  <car/1> <speed> <car/1/speed> .
  <car/1/speed> seas:estimation <estimation> .
  <estimation> seas:temporalContext [ time:inXSDDateTime "2016-07-22T12:05:43Z"^^xsd:dateTime ] .

  And the graph with name <exec/output> contains: 

  <car/1> <speed> <car/1/speed> .
  <car/1/speed> seas:estimation <estimation> .
  <estimation> seas:estimatedValue "73 km/h"^^cdt:ucum ; 
    seas:temporalContext [ time:inXSDDateTime "2016-07-22T12:05:43Z"^^xsd:dateTime ] ;
    seas:interpretedAs sdmx-code:obsStatus-F ."""@en ;
  vs:term_status "stable" ;
  rdfs:isDefinedBy seas:ProcessOntology .


seas:executedBy a owl:ObjectProperty, owl:FunctionalProperty ;
  rdfs:label "executed by" ;
  rdfs:comment "Relationship between an execution and the agent that made it. This concept generalizes ssn:observedBy, which in the first version of the SSN ontology is a sub property of dul:includesObject. dul:includesObject is a relation between situations and objects, e.g. 'this morning I've prepared my coffee and had my fingers burnt' (i.e.: the preparation of my coffee this morning included me)."@en ;
  vs:term_status "stable" ;
  rdfs:domain seas:ProcessExecution ;
  rdfs:range seas:ProcessExecutor ;
  owl:inverseOf seas:executed ;
  rdfs:isDefinedBy seas:ProcessOntology .
 
seas:executed a owl:ObjectProperty ;
  rdfs:label "executed" ;
  rdfs:comment "Relationship between a process executor and an execution it made."@en ;
  vs:term_status "stable" ;
  rdfs:domain seas:ProcessExecutor ;
  rdfs:range seas:ProcessExecution ;
  owl:inverseOf seas:executedBy ;
  rdfs:isDefinedBy seas:ProcessOntology .

seas:methodUsed a owl:ObjectProperty , owl:FunctionalProperty ;
  rdfs:label "method used" ;
  rdfs:comment "Relation between a ProcessExecution and the Process it executes. This concept generalizes ssn:sensingMethodUsed, which in the first version of the SSN ontology is a sub property of dul:satisfies. dul:satisfies is a relation between a Situation and a Description, e.g. the execution of a Plan satisfies that plan."@en ;
  rdfs:domain seas:ProcessExecution ;
  rdfs:range seas:Process ;
  vs:term_status "stable" ;
  rdfs:isDefinedBy seas:ProcessOntology .

# additional axioms

[] a owl:AllDisjointClasses ;
   owl:members ( seas:FeatureOfInterest seas:Property seas:PropertyKey seas:ProcessExecution seas:Process ) .

[] a owl:AllDisjointClasses ;
   owl:members ( seas:Property seas:PropertyKey seas:ProcessExecutor seas:ProcessExecution seas:Process ) .

# alignment to SSN

seas:Process rdfs:subClassOf ssn:Process .

ssn:Sensor rdfs:subClassOf seas:ProcessExecutor .

ssn:Observation rdfs:subClassOf seas:ProcessExecution .

seas:hasInput rdfs:subPropertyOf ssn:hasInput .
ssn:hasInput a owl:ObjectProperty .

seas:hasOutput rdfs:subPropertyOf ssn:hasOutput .
ssn:hasOutput a owl:ObjectProperty .

ssn:implements rdfs:subPropertyOf seas:implements .

ssn:observedBy rdfs:subPropertyOf seas:executedBy .

ssn:sensingMethodUsed rdfs:subPropertyOf seas:methodUsed .

# inputs and outputs

seas:hasInput a owl:ObjectProperty , owl:FunctionalProperty ;
  rdfs:label "has input" ;
  rdfs:comment """Relation between:
  (a) a seas:Process and the description of the input graph;
  (b) a seas:ProcessExecutor and the description of the input graph;
  (c) a seas:ProcessExecution and the input graph."""@en ;
  vs:term_status "stable" ;
  rdfs:range seas:Graph ;
  rdfs:isDefinedBy seas:ProcessOntology .

seas:hasOutput a owl:ObjectProperty , owl:FunctionalProperty ;
  rdfs:label "has output" ;
  rdfs:comment """Relation between:
  (a) a seas:Process and the description of the output graph;
  (b) a seas:ProcessExecutor and the description of the output graph;
  (c) a seas:ProcessExecution and the output graph."""@en ;
  rdfs:range seas:Graph ;
  vs:term_status "stable" ;
  rdfs:isDefinedBy seas:ProcessOntology .


# description of the entailment regime 

#seas:ProcessOntologyEntailmentRegime a liner:EntailmentRegime ;
#  rdfs:label "SEAS-ProcessOntology entailment regime"@en ;
#  liner:extends seas:FeatureOfInterestOntologyEntailmentRegime ;
#  liner:axiomaticTriples seas:ProcessOntology ;
#  liner:inferenceRules [
#    liner:asSPARQLRules ( ) ] .

